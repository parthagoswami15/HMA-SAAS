# HMS Project Cleanup & Refactoring Plan

## ðŸŽ¯ **PRODUCTION-READY TRANSFORMATION**

### **Phase 1: Immediate Cleanup (Priority: CRITICAL)**

#### **1.1 Remove Excessive Documentation**
- **Issue**: 74+ markdown files cluttering root directory
- **Action**: Move to `/docs` folder, keep only essential ones in root
- **Files to Keep in Root**: `README.md`, `SETUP_GUIDE.md`, `DEPLOYMENT.md`

#### **1.2 Remove Unused Dependencies**
**Frontend Cleanup:**
```bash
npm uninstall @emotion/react @mantine/carousel @mantine/dropzone @mantine/form @mantine/spotlight @mantine/tiptap @tanstack/react-query @tiptap/pm @tiptap/react @tiptap/starter-kit
```

**Backend Cleanup:**
```bash
npm uninstall @nestjs/event-emitter @nestjs/schedule @nestjs/serve-static @sendgrid/mail @types/cookie-parser cookie-parser exceljs helmet jsonwebtoken moment node-cron pdfkit razorpay stripe swagger-ui-express twilio uuid
```

#### **1.3 Fix Critical TypeScript Issues**
- Add missing imports (`SimpleGrid`, `DatePicker`)
- Replace `any` types with proper interfaces
- Fix React HTML entity issues
- Add proper type definitions

### **Phase 2: Code Structure Optimization**

#### **2.1 Standardize Folder Structure**

**Current Issues:**
- Inconsistent component organization
- Mixed concerns in directories
- No clear separation of utilities/services

**New Structure:**
```
apps/
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                    # Next.js app router
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/            # Auth route group
â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/       # Dashboard route group
â”‚   â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ components/            # Reusable UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/               # Base UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/            # Form components
â”‚   â”‚   â”‚   â””â”€â”€ shared/           # Shared components
â”‚   â”‚   â”œâ”€â”€ hooks/                # Custom hooks
â”‚   â”‚   â”œâ”€â”€ lib/                  # Utilities and config
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â”‚   â””â”€â”€ validations.ts
â”‚   â”‚   â”œâ”€â”€ services/             # API calls
â”‚   â”‚   â”œâ”€â”€ stores/               # State management
â”‚   â”‚   â”œâ”€â”€ types/                # TypeScript definitions
â”‚   â”‚   â””â”€â”€ styles/               # Global styles
â”‚   â””â”€â”€ package.json
â””â”€â”€ api/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ common/               # Shared utilities
    â”‚   â”‚   â”œâ”€â”€ decorators/
    â”‚   â”‚   â”œâ”€â”€ filters/
    â”‚   â”‚   â”œâ”€â”€ guards/
    â”‚   â”‚   â”œâ”€â”€ interceptors/
    â”‚   â”‚   â””â”€â”€ pipes/
    â”‚   â”œâ”€â”€ config/               # Configuration
    â”‚   â”œâ”€â”€ database/             # Database related
    â”‚   â”‚   â”œâ”€â”€ migrations/
    â”‚   â”‚   â””â”€â”€ seeds/
    â”‚   â”œâ”€â”€ modules/              # Feature modules
    â”‚   â”‚   â”œâ”€â”€ auth/
    â”‚   â”‚   â”œâ”€â”€ users/
    â”‚   â”‚   â”œâ”€â”€ patients/
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â””â”€â”€ main.ts
    â””â”€â”€ package.json
```

### **Phase 3: Architecture Improvements**

#### **3.1 Frontend Architecture**
- **State Management**: Consolidate Zustand stores
- **API Layer**: Implement proper error handling and loading states
- **Component Architecture**: Create atomic design system
- **Routing**: Organize with Next.js route groups

#### **3.2 Backend Architecture**
- **Module Structure**: Proper NestJS module organization
- **Database**: Optimize Prisma schema and queries
- **Authentication**: Secure JWT implementation
- **Error Handling**: Global exception filters
- **Validation**: Proper DTO validation

### **Phase 4: Production Readiness**

#### **4.1 Performance Optimization**
- **Code Splitting**: Implement proper lazy loading
- **Bundle Analysis**: Optimize dependencies
- **Database**: Add proper indexing
- **Caching**: Implement Redis caching

#### **4.2 Security Hardening**
- **Input Validation**: Comprehensive validation
- **Authentication**: Secure session management
- **Authorization**: Role-based access control
- **Environment**: Secure environment variables

#### **4.3 Monitoring & Observability**
- **Logging**: Structured logging
- **Error Tracking**: Error monitoring
- **Performance**: Performance monitoring
- **Health Checks**: Application health endpoints

### **Estimated Timeline**
- **Phase 1**: 2-3 days (Immediate cleanup)
- **Phase 2**: 3-4 days (Structure optimization)
- **Phase 3**: 5-7 days (Architecture improvements)
- **Phase 4**: 3-5 days (Production readiness)

### **Risk Assessment**
- **Low Risk**: Dependency cleanup, documentation organization
- **Medium Risk**: Folder restructuring, import path updates
- **High Risk**: Major architecture changes, database modifications

### **Success Metrics**
- âœ… Zero unused dependencies
- âœ… <50 TypeScript errors (from 1000+)
- âœ… Clean folder structure
- âœ… Production-ready deployment
- âœ… Comprehensive documentation